(window.webpackJsonp=window.webpackJsonp||[]).push([["tour-events"],{109:function(e,t,n){"use strict";n.r(t);var r=n(1),o=document.querySelectorAll("[data-module=tour-events]"),i=["id","name","price","days","destinations"],a={days:"dimension26",destinations:"dimension27"},c=[],d=[],s=!1,u=null;function l(){window.eventBatch&&0!==window.eventBatch.length&&(window.dataLayer.push({ecommerce:null}),window.dataLayer.push({event:"productImpression",ecommerce:{currencyCode:r.a.Visitor.CurrencyCode,impressions:window.eventBatch}}),window.eventBatch=[])}function w(e){var t=e.parentNode,n={category:"Itineraries",list:"Itinerary slider",position:Array.prototype.indexOf.call(t.parentNode.querySelectorAll("li"),t)+1};return i.forEach(t=>{var r,o,i=null!==(r=a[t])&&void 0!==r?r:t,c=e.querySelector("[data-product-".concat(t,"]"));null==c?n[i]=void 0:n[i]=null!==(o=c.getAttribute("data-product-".concat(t)))&&void 0!==o?o:c.innerText}),n}function v(e){s=!0,c.forEach(t=>{e.unobserve(t)}),(c=document.querySelectorAll(".card--tour")).forEach(t=>{-1===d.indexOf(t)&&e.observe(t)})}if("IntersectionObserver"in window&&void 0===window.eventBatch){window.eventBatch=[];var h=new IntersectionObserver((function(e,t){e.forEach(e=>{e.isIntersecting&&(t.unobserve(e.target),d.push(e.target),window.eventBatch.push(w(e.target)),window.eventBatch.length>=10&&l())}),null===u&&(u=setTimeout(()=>{u=null,l()},6e4))}),{threshold:.5});setTimeout(()=>{s||v(h)},6e4),window.addEventListener("cards.changed",e=>{"tour"===e.detail.cardType&&v(h)}),document.addEventListener("visibilitychange",()=>{"hidden"===document.visibilityState&&l()}),o.forEach(e=>{e.addEventListener("click",e=>{var t;e.target.matches(".card--tour a")&&(t=e.target.closest(".card--tour"),window.dataLayer.push({event:"productClick",ecommerce:{click:{actionField:{list:"Itinerary slider"},products:[w(t)]}}}))})})}}}]);